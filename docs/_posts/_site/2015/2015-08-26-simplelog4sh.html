<p>simpleLog4sh是我从之前写的shell脚本里提取的shell日志工具类。简单改进以后，形成极为简单的shell日志框架。目前发布在GitHub上： 
<a href="https://github.com/maoshuai/simpleLog4sh">https://github.com/maoshuai/simpleLog4sh</a></p>

<h1 id="简介">简介</h1>
<p><strong>simpleLog4sh</strong>是一个极为简单的shell日志框架，甚至不应该叫日志框架。<br />
与其他shell日志框架不同，它仅仅是一个：</p>

<p><strong>只有几十行的纯shell脚本，没有任何依赖</strong>。</p>

<p>但通过简单的封装，这个小shell可以提供诸如：</p>
<ol>
  <li>logInfo，logDebug等多级别日志输出</li>
  <li>日志记录带有时间戳和日志级别</li>
  <li>将日志输出到指定文件</li>
  <li>日志文件按日期进行归档</li>
  <li>抛出异常</li>
</ol>

<p><strong>simpleLog4sh</strong>不期望做到像Apache日志框架一样复杂，仅仅在您写toy小程序的时候，能帮助你实现最简单的日志功能，而不必总是echo。</p>

<p>您通过下面的语句，：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>logInfo hello, world  
logDebug "hello, world" # 推荐将所有的内容用双引号包围  
</code></pre></div></div>
<p>输出内容举例如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2015-08-26 20:12:21 [test.sh] (INFO) hello, world  
2015-08-26 20:12:21 [test.sh] (DEBUG) hello, world  
</code></pre></div></div>

<h1 id="使用方法举例">使用方法举例</h1>
<h2 id="导入simplelog4sh">导入simpleLog4sh</h2>
<p>在您的shell开头导入即可，可以参考/test/test.sh的中的用法：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. ../src/simplelog4sh.sh
</code></pre></div></div>

<h2 id="logxxx语句">logXXX语句</h2>
<p>simpleLog4sh提供了四个日志级别的方法，他们分别是</p>
<ol>
  <li><code class="highlighter-rouge">logDebug</code></li>
  <li><code class="highlighter-rouge">logInfo</code></li>
  <li><code class="highlighter-rouge">logWarn</code></li>
  <li><code class="highlighter-rouge">logError</code></li>
</ol>

<p>用法很简单，所有的参数都会被当做日志内容记录，比如：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>logInfo hello, world  
logDebug "hello, world" # 推荐将所有的内容用双引号包围  
</code></pre></div></div>
<p>输出内容举例如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2015-08-26 20:03:18 [test.sh] (INFO) hello, this logInfo  
2015-08-26 20:12:21 [test.sh] (DEBUG) hello, logDebug  
2015-08-26 20:12:21 [test.sh] (INFO) hello, logInfo  
2015-08-26 20:12:21 [test.sh] (WARN) hello, logWarn  
2015-08-26 20:12:21 [test.sh] (ERROR) hello, logError  
2015-08-26 20:12:21 [test.sh] (ECHO) hello, myEcho  
2015-08-26 20:12:21 [test.sh] (ECHO_ERROR) hello, myEchoError  
2015-08-26 20:13:26 [test.sh] (DEBUG) hello, logDebug  
</code></pre></div></div>

<h2 id="设置日志级别">设置日志级别</h2>
<p>simpleLog4sh支持6个日志级别，含义与Apache日志框架类似：</p>
<ol>
  <li>ALL</li>
  <li>DEBUG</li>
  <li>INFO</li>
  <li>WARN</li>
  <li>ERROR</li>
  <li>OFF</li>
</ol>

<p>如果要设置指定的日志级别，请在导入simpleLogsh之后，export变量<code class="highlighter-rouge">LOG_LEVEL</code>，可设置为如下预置常量：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LOG_LEVEL_ALL  
LOG_LEVEL_DEBUG  
LOG_LEVEL_INFO  
LOG_LEVEL_WARN  
LOG_LEVEL_ERROR  
LOG_LEVEL_OFF  
</code></pre></div></div>

<h2 id="throw语句">throw语句</h2>
<p><code class="highlighter-rouge">throw</code>语句类似java语言中抛异常。通过使用<code class="highlighter-rouge">throw</code>语句，达到类似抛异常的效果。比如：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>throw "ParamsNumberException: need 2 params"
</code></pre></div></div>
<p>使用throw语句，程序将在stderr输出上述语句，同时在日志文件以LOG_LEVEL_ERROR级别记录。最后程序会意退出码1退出。</p>

<h2 id="myecho与myechoerror语句">myEcho与myEchoError语句</h2>
<p><code class="highlighter-rouge">myEcho</code>和<code class="highlighter-rouge">myEchoError</code>与shell的<code class="highlighter-rouge">echo</code>语句类似，但有两点增强：</p>
<ol>
  <li><code class="highlighter-rouge">myEcho</code>和<code class="highlighter-rouge">myEchoError</code>不仅会输出到控制台，还会输出到日志文件。</li>
  <li><code class="highlighter-rouge">myEchoError</code>的输出是stdErr</li>
</ol>

<h2 id="日志路径与日志文件滚动">日志路径与日志文件滚动</h2>
<p>默认程序的输出日志路径是<code class="highlighter-rouge">/tmp/simplelog4sh</code>，并在此目录下面生成已当前日期命名的日志文件，类似如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-rw-r--r--  1 maoshuai  wheel  1839  8 25 23:48 log_20150825.log  
-rw-r--r--  1 maoshuai  wheel  1839  8 26 20:32 log_20150826.log  
</code></pre></div></div>
<p>当然，你可以通过export变量<code class="highlighter-rouge">SIMPLE_LOG_4_SH_DIR</code>指定你的日志路径，替换上述默认值。比如：<code class="highlighter-rouge">export SIMPLE_LOG_4_SH_DIR=/var/log</code>，则所有日志都打印到<code class="highlighter-rouge">/var/log</code>目录下面
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTgwOTcxODY3M119
--></p>
